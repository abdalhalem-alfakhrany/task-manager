{
	"info": {
		"_postman_id": "37ba0cad-8b2c-4c95-8934-154e8078bc6a",
		"name": "Task Manager",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "23984317"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "login as manager",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Extract data.token from response and set as environment variable 'token'",
									"if (pm.response.code === 200) {",
									"    try {",
									"        var jsonData = pm.response.json();",
									"        if (jsonData && jsonData.data && jsonData.data.token) {",
									"            pm.environment.set('token', jsonData.data.token);",
									"        }",
									"    } catch (e) {",
									"        // Handle JSON parse error",
									"    }",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "email",
									"value": "manager@app.com",
									"type": "text"
								},
								{
									"key": "password",
									"value": "12345678",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{api_base_url}}/auth/login",
							"host": [
								"{{api_base_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "login as user",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Extract data.token from response and set as environment variable 'token'",
									"if (pm.response.code === 200) {",
									"    try {",
									"        var jsonData = pm.response.json();",
									"        if (jsonData && jsonData.data && jsonData.data.token) {",
									"            pm.environment.set('token', jsonData.data.token);",
									"        }",
									"    } catch (e) {",
									"        // Handle JSON parse error",
									"    }",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "email",
									"value": "user@app.com",
									"type": "text"
								},
								{
									"key": "password",
									"value": "12345678",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{api_base_url}}/auth/login",
							"host": [
								"{{api_base_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Task",
			"item": [
				{
					"name": "create",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generate a random task title",
									"function randomTitle() {",
									"    const adjectives = [\"Quick\", \"Urgent\", \"Important\", \"Routine\", \"Pending\", \"Major\", \"Minor\", \"Critical\", \"Simple\", \"Complex\"];",
									"    const nouns = [\"Report\", \"Meeting\", \"Review\", \"Task\", \"Update\", \"Call\", \"Email\", \"Plan\", \"Design\", \"Test\"];",
									"    return adjectives[Math.floor(Math.random() * adjectives.length)] + \" \" + nouns[Math.floor(Math.random() * nouns.length)];",
									"}",
									"",
									"// Generate a random task description",
									"function randomDescription() {",
									"    const actions = [\"Complete the\", \"Schedule the\", \"Review the\", \"Prepare the\", \"Finalize the\", \"Initiate the\", \"Organize the\", \"Document the\", \"Analyze the\", \"Submit the\"];",
									"    const objects = [\"project documentation\", \"team meeting\", \"feature update\", \"client call\", \"test plan\", \"design review\", \"weekly report\", \"deployment\", \"code review\", \"budget analysis\"];",
									"    return actions[Math.floor(Math.random() * actions.length)] + \" \" + objects[Math.floor(Math.random() * objects.length)] + \".\";",
									"}",
									"",
									"// Generate a random due_date between 2 and 5 days from now, at a random hour",
									"function randomDueDate() {",
									"    const now = new Date();",
									"    const daysToAdd = 0; // 2 to 5 days",
									"    const randomHour = Math.floor(Math.random() * 24); // 0 to 23",
									"    const dueDate = new Date(now.getFullYear(), now.getMonth(), now.getDate() + daysToAdd, randomHour, 0, 0, 0);",
									"    return dueDate.toISOString();",
									"}",
									"",
									"pm.environment.set(\"title\", randomTitle());",
									"pm.environment.set(\"description\", randomDescription());",
									"pm.environment.set(\"due_date\", randomDueDate());",
									"pm.environment.set(\"user_id\", Math.floor(Math.random() * (12 - 3 + 1)) + 3)"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"{{title}}\",\n  \"description\": \"{{description}}\",\n  \"due_date\": \"{{due_date}}\",\n  \"user_id\": {{user_id}}\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{api_base_url}}/task/",
							"host": [
								"{{api_base_url}}"
							],
							"path": [
								"task",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "list",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{api_base_url}}/task/",
							"host": [
								"{{api_base_url}}"
							],
							"path": [
								"task",
								""
							],
							"query": [
								{
									"key": "filter[due_date]",
									"value": "2025-10-26,2025-10-27",
									"disabled": true
								},
								{
									"key": "filter[status]",
									"value": "pending",
									"disabled": true
								},
								{
									"key": "filter[user_id]",
									"value": "2",
									"disabled": true
								},
								{
									"key": "sort",
									"value": "-due_date",
									"disabled": true
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "show",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{api_base_url}}/task/1",
							"host": [
								"{{api_base_url}}"
							],
							"path": [
								"task",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "update",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\" : \"pending\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{api_base_url}}/task/1",
							"host": [
								"{{api_base_url}}"
							],
							"path": [
								"task",
								"1"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "api_base_url",
			"value": "http://127.0.0.1:8000/api/",
			"type": "string",
			"disabled": true
		}
	]
}